<form [formGroup]="groupForm" (ngSubmit)="onSubmit()">
  <ion-grid>
    <ion-row>
      <ion-col>
        <ion-text class="header-text">Details</ion-text>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label position="floating">Gruppenname</ion-label>
          <ion-input
            autocomplete="off"
            type="text"
            formControlName="name"
            maxlength="25"
            autofocus
            required
          ></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="members">
      <ion-col>
        <ion-text class="header-text">Mitglieder</ion-text>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-item>
            <ion-input
            #memberInput
            placeholder="Mitglied hinzufügen"
            name="newMember"
            [(ngModel)]="newMemberName"
            [ngModelOptions]="{ standalone: true }"
            autocomplete="off"
          ></ion-input>
          <ion-button
            type="button"
            (click)="addMember()"
            slot="end"
            [disabled]="!addMemberValid()"
            >Hinzufügen</ion-button
          >
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row class="members">
      <ion-col size="9">
        <div formArrayName="members">
          <app-missing-data-text
            [data]="members.controls"
            text="Keine Mitglieder vorhanden!"
          ></app-missing-data-text>
          <app-member
            [name]="member.value"
            showDelete="true"
            (delete)="removeMember(member.value)"
            *ngFor="let member of members.controls; let i = index"
          ></app-member>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-button
    type="submit"
    color="primary"
    expand="block"
    class="create-button"
    [disabled]="!groupForm.valid"
  >
    <ion-icon name="checkmark" slot="start"></ion-icon>
    {{ buttonText }}
  </ion-button>
</form>
